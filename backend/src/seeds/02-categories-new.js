'use strict';
const { v4: uuidv4 } = require('uuid');

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    const now = new Date();
    
    // Create categories without parent-child relationships
    const categories = [
      {
        id: uuidv4(),
        name: 'Erziehungsberatung (§ 28 SGB VIII)',
        description: 'Erziehungsberatung und andere Beratungsdienste und -einrichtungen',
        code: '28',
        unitType: 'hours',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Soziale Gruppenarbeit (§ 29 SGB VIII)',
        description: 'Soziale Gruppenarbeit für ältere Kinder und Jugendliche',
        code: '29',
        unitType: 'hours',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Erziehungsbeistand (§ 30 SGB VIII)',
        description: 'Erziehungsbeistand, Betreuungshelfer',
        code: '30',
        unitType: 'hours',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Sozialpädagogische Familienhilfe (§ 31 SGB VIII)',
        description: 'Sozialpädagogische Familienhilfe',
        code: '31',
        unitType: 'hours',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Erziehung in Tagesgruppe (§ 32 SGB VIII)',
        description: 'Erziehung in einer Tagesgruppe',
        code: '32',
        unitType: 'places',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Vollzeitpflege (§ 33 SGB VIII)',
        description: 'Vollzeitpflege in einer anderen Familie',
        code: '33',
        unitType: 'places',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Heimerziehung (§ 34 SGB VIII)',
        description: 'Heimerziehung, sonstige betreute Wohnform',
        code: '34',
        unitType: 'places',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Intensive sozialpädagogische Einzelbetreuung (§ 35 SGB VIII)',
        description: 'Intensive sozialpädagogische Einzelbetreuung',
        code: '35',
        unitType: 'hours',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Eingliederungshilfe (§ 35a SGB VIII) - Ambulant',
        description: 'Ambulante Hilfen für seelisch behinderte Kinder und Jugendliche',
        code: '35a-ambulant',
        unitType: 'hours',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Eingliederungshilfe (§ 35a SGB VIII) - Teilstationär',
        description: 'Teilstationäre Hilfen für seelisch behinderte Kinder und Jugendliche',
        code: '35a-teilstationaer',
        unitType: 'places',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Eingliederungshilfe (§ 35a SGB VIII) - Stationär',
        description: 'Stationäre Hilfen für seelisch behinderte Kinder und Jugendliche',
        code: '35a-stationaer',
        unitType: 'places',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Hilfe für junge Volljährige (§ 41 SGB VIII) - Ambulant',
        description: 'Ambulante Hilfen für junge Volljährige',
        code: '41-ambulant',
        unitType: 'hours',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Hilfe für junge Volljährige (§ 41 SGB VIII) - Betreutes Wohnen',
        description: 'Betreutes Wohnen für junge Volljährige',
        code: '41-wohnen',
        unitType: 'places',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Hilfe für junge Volljährige (§ 41 SGB VIII) - Nachbetreuung',
        description: 'Nachbetreuung nach stationären Hilfen',
        code: '41-nachbetreuung',
        unitType: 'hours',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Inobhutnahme (§ 42 SGB VIII) - Kurzfristig',
        description: 'Kurzfristige Inobhutnahme in Krisensituationen',
        code: '42-kurzfristig',
        unitType: 'places',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Inobhutnahme (§ 42 SGB VIII) - Bereitschaftspflege',
        description: 'Bereitschaftspflege in Familien',
        code: '42-bereitschaft',
        unitType: 'places',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Inobhutnahme (§ 42 SGB VIII) - Clearing',
        description: 'Clearingstellen zur Abklärung des Hilfebedarfs',
        code: '42-clearing',
        unitType: 'places',
        parentId: null,
        isActive: true,
        createdAt: now,
        updatedAt: now,
      },
    ];
    
    return queryInterface.bulkInsert('categories', categories);
  },

  async down(queryInterface, Sequelize) {
    return queryInterface.bulkDelete('categories', null, {});
  }
};
